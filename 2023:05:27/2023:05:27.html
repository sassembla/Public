<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><link rel="stylesheet" type="text/less" href="../stylesheets/less/default.less"/><script type="text/javascript" src="../javascripts/less-1.3.0.min.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Sans'}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Sans'; min-height: 18.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    span.s1 {font: 22.0px 'Hiragino Sans'}
    span.s2 {font: 12.0px Helvetica}
    span.s3 {font: 12.0px 'Hiragino Sans'}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>Monocle</b><span class="s1"><b>ことはじめ</b></span></p>
<p class="p2"><br></p>
<p class="p3"><b>概要</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>AppleGlass出るのかなー楽しみ。</p>
<p class="p3"><span class="Apple-tab-span">	</span>というわけでARGlass? のちっこいやつ、monocleが届いたので使って遊んでいる。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>これ</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><a href="https://brilliant.xyz/">https://brilliant.xyz</a></p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>買う</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>記録を見たら、ここで買うのを決心、一個買ってる。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>2023/03/24</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><a href="https://twitter.com/toru_inoue/status/1639197476522688513">https://twitter.com/toru_inoue/status/1639197476522688513</a></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>注意：この会社すごくて、購入してもすぐには購入確認メールが来ません。</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>4日とか経つと来ます。</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>その旨は買う直前にちゃんと書いてあります。あるけど、自分の購入履歴が見れるページもねーーーーのよw</b></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>あれ、通知来ないなー、確認できないなー、って思って、なんか購入ミスったのかと思い</p>
<p class="p3"><span class="Apple-tab-span">	</span>もう一度、まあ購入直前で引き返せば平気か？って思って</p>
<p class="p4"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>二個目を買ってしまう。</b></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>この時は、、やってしまった、、まあ、後でキャンセルすればいいか、ごめん、とか思ってた。</p>
<p class="p3"><span class="Apple-tab-span">	</span>で、まだおもしろ状態が続く。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>2023/03/28</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>発送確認メールが<b>1通</b> とどく。</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>で。発送メールが１件しかこない。</p>
<p class="p3"><span class="Apple-tab-span">	</span>二通来たら一通キャンセルしようとか思ってたのがこの頃。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>→カードの支払い調べるとちゃんと2回払ってるのが確定</p>
<p class="p3"><span class="Apple-tab-span">	</span>→こわ、、サイトからメールしよ</p>
<p class="p3"><span class="Apple-tab-span">	</span>→failed to deliver、、！！</p>
<p class="p3"><span class="Apple-tab-span">	</span>→は？、、は、、、？ サイトに書いてあるメアドが到達不可で帰ってくる。 は？</p>
<p class="p3"><span class="Apple-tab-span">	</span>→Discordがあるのでそこに向かう。特定のそういうサポート口は無いのでその辺で「二個買ったとおもうんすけど、、」って伝えると、</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2"><img src="IMG_1988.jpg" alt="IMG_1988.jpg"></span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>意訳1: 二個買ったのであっとるで！ で一個発送予定メール送るの失敗したわw ごめん。とのこと。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>意訳2:(これはスクショを無くした)<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>そんでお問合せメアドな、ごめん、サイトに載ってたの古いやつだったわガハハ！</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>治しとくね！！(そうですか)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>そっかあ。</p>
<p class="p3"><span class="Apple-tab-span">	</span>ちなみにこの頃には、二個目の買い手が知り合いから出てきていて、じゃあいっか、二個きたら送るね、とかなってて、もう逆に安心。</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>で待ってたら、ちゃんと二個きた。</p>
<p class="p3"><span class="Apple-tab-span">	</span>2023/05/23</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><a href="https://twitter.com/toru_inoue/status/1660863736100397057?s=21&amp;t=Qf4LwLLckp41JP1tfIPyCA">https://twitter.com/toru_inoue/status/1660863736100397057</a></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>時系列まとめ</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>3/24 購入</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>3/28 購入確認メールくる(1通のみ)</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>4月中 Discordでおはなし、解決</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>5/23 到着</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p3"><b>動かしてみる</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>ドキュメントのページをもとにセットアップしてく</p>
<p class="p3"><span class="Apple-tab-span">	</span><a href="https://docs.brilliant.xyz/">https://docs.brilliant.xyz</a></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>つってもファームウェアのアプデくらいしかやることない感じだけど。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>WebREPLかVSCodeのextensionでmonocleのやつがあり、それがかなりいい感じなので、VSCodeを使っての開発がおすすめ。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ファームウェアアプデコマンドとか</p>
<p class="p3"><span class="Apple-tab-span">	</span><a href="https://docs.brilliant.xyz/#how-do-i-update-the-firmware">https://docs.brilliant.xyz/#how-do-i-update-the-firmware</a></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><b>開発環境構築</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>1. VSCodeにmonocle extension入れる</p>
<p class="p3"><span class="Apple-tab-span">	</span>2. VSCodeで⌘+shift+p → initialize new project folder</p>
<p class="p3"><span class="Apple-tab-span">	</span>3. monocleをケースから出すと自動的に起動するので、2で作ったプロジェクトの下のほう、赤く輝くmonocleボタンを押すと、、</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202023-05-27%2022.45.16.png" alt="スクリーンショット 2023-05-27 22.45.16.png"></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">自動的に</span>monocle<span class="s3">と</span>bluetooth<span class="s3">で繋がる。で、接続できると</span>VSCode<span class="s3">の</span>TERMINAL<span class="s3">でREPLが動く。</span></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>4. であとはmicroPythonを書く + 保存すると実機に自動的にコードが送り込まれ、表示が切り替わ、、、らない！</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>虹色の表示のまんま。なんで？</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ファームウェアアプデ以外にやることがあったか？</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>→ ドキュメントにはなかったけど、Discordを漁ったら情報があり。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>5/23? 以降に配布されたファームウェアだと、fpgaのアプデが掛からないのか、fpgaを自力でアプデする必要がある、ぽい。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>VSCodeのmonocle extension入れると左のバーにmonocleのアイコンが出るのがあり</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p5"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202023-05-27%2022.50.52.png" alt="スクリーンショット 2023-05-27 22.50.52.png"></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ここでね、見つけるわけですよ。燦然と輝く Update FPGA ボタンを。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ちなみにこのボタンは最新状態でも元気に出る。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>monocleをVSCodeに接続した状態で押すと、FPGAが無事アプデされ、、それ以降は、書いたコードの内容が、monocleのディスプレイにも反映されるようになった。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>エラーも全然出ないし、見た目は虹色のまんまだしで、数日悩んだが。解決できた。</p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>バグ</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>VSCodeと接続でき、FPGAアプデで表示も切り替えられるようになった段階で、タッチインターフェースの反応とかもいい感じになったんだけど、</p>
<p class="p3"><span class="Apple-tab-span">	</span>次のようなバグを確認してる。</p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3">1. 文字の表示位置がバグる</p>
<p class="p3"><span class="Apple-tab-span">	</span>表示座標を0,0でセットしても、xが真ん中から表示されるようになる。yも0からずれてるかも。</p>
<p class="p3"><span class="Apple-tab-span">	</span>device.reset() をコード上で書いて、左右どっちかのタッチから実行したら、再起動完了した頃には問題なく動くようになってた。</p>
<p class="p3"><span class="Apple-tab-span">	</span>再発したらタッチ → リセットで問題が消える。開発用にVSCodeを繋いでる時しか起きないかもしれない。</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3">2. VSCode繋いだ状態だと、importが無視される</p>
<p class="p3"><span class="Apple-tab-span">	</span>いまだに現象をよく掴めていないが、コードを保存するとmonocleにコードが転送されて、monocleが一瞬で再起動される。んだけど、</p>
<p class="p3"><span class="Apple-tab-span">	</span>その際コードの全部が更新されるわけではないらしく、microPythonのコードで書かれてるimportがされなかったりする。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>こうなったらコードのdevive files/main.pyとかを右クリックから手動で Upload File To Device を実行すると、ちゃんと更新される、、ことがある。</p>
<p class="p3"><span class="Apple-tab-span">	</span>めんどくさいので自分は左タッチにresetを仕込んでて、困ったらresetしてる。resetして再起動すると送り込んだコードがきちんとロードされてるっぽい。</p>
<p class="p3"><span class="Apple-tab-span">	</span>が、この方法には「毎回VSCodeとのbt接続が切断される」という悲しい副作用がある。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>まーーーべつにいいんすけどね～～。</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><b>豆知識</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>・再帰で関数を呼ぶと4~5層くらいで死ぬ。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ちゃんとwhileとタイマーみたいなものを使うと良い。</p>
<p class="p3"><span class="Apple-tab-span">	</span>・フレームレートみたいなものは持ってない。まあそりゃそう。</p>
<p class="p3"><span class="Apple-tab-span">	</span>・日本語は表示されない</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>別に困ってないが、方法はあると思う。</p>
<p class="p3"><span class="Apple-tab-span">	</span>・電池が持つ時間は表示の明るさと面積にだいぶ関係してそう</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>明るさが5段階で指定できて、一番暗くてもまあ十分読める。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>その状態でVSCodeで開発しながら見てると、だいたい1時間くらいでバッテリーが0になる。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>充電時間もかなり高速な感じなので、うーん、充電しながら開発したいが、、</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>シミュレータみたいなものがあるんだろうか。</p>
<p class="p3"><span class="Apple-tab-span">	</span>・LEDは無灯火、弱く点灯状態と強く点灯状態があり、REDとGREENの2つのLEDがある。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>赤は、monocleの起動中は弱く点灯状態でつきっぱなしになるっぽい。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>といってもつけてる側からは全然見えないので、開発中にその辺に置いてコードが変更されたら光る～とかすると楽。</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p3"><b>総評</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>カラー表示できて軽くてカメラ付きで画像表示できてbluetoothで他デバイスと通信できてタッチ取れてマイクついてて、って感じで、</p>
<p class="p3"><span class="Apple-tab-span">	</span>よく詰め込んだな～これ。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>挙動もめちゃくちゃ軽快なので、良い。</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>これで視界の片隅に表示出したりする。</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
</body>
</html>
