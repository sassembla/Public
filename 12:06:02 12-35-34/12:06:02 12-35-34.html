<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><link rel="stylesheet" type="text/less" href="../stylesheets/less/default.less"/><script type="text/javascript" src="../javascripts/less-1.3.0.min.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1138.47">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Hiragino Kaku Gothic ProN'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'; min-height: 18.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px Helvetica}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>GradleでJarをRunしたり</b></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>概要</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>GradleからJarファイルをRunしたりする話。<b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><span class="Apple-tab-span">	</span>Gradleに統合されてるantを使う。</p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>手段</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>予め、「実行したいJar」をbuild.gradleのそばに用意しておく(MavenRepo上ならDependency書いとく)</p>
<p class="p3"><span class="Apple-tab-span">	</span>とかする。</p>
<p class="p3"><span class="Apple-tab-span">	</span>taskを用意して、その中でJarを実行する記述として下記を入れる。</p>
<p class="p3"><span class="Apple-tab-span">	</span>下記だと適当なタスクsomeを用意した。</p>
<p class="p2"><br></p>
<pre class="code">task some {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>ant.java(classname:'com.kissaki.MDTestRunner', failOnError: 'true') {</pre>
<pre class="code"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>定義</pre>
<pre class="code"><span class="Apple-tab-span">	</span>}</pre>
<pre class="code">}</pre>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>failOnError設定で、jarの実行fail時にエラー扱いにするかどうかが指定できる。</p>
<p class="p3"><span class="Apple-tab-span">	</span>他にもforkだったり</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>argsなどは、</p>
<pre class="code">task some {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>ant.java(classname:'com.kissaki.MDTestRunner', failOnError: 'true') {</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val1")</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val2")</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val3")</pre>
<pre class="code"><span class="Apple-tab-span">	</span>}</pre>
<pre class="code">}</pre>
<p class="p3"><span class="Apple-tab-span">	</span>みたいに書き込む事が出来る。</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>肝心のJarの場所指定は、Gradleの規定に基づいた方法で指定できるんだけど、</p>
<p class="p3"><span class="Apple-tab-span">	</span>srcフォルダとかの中だったら、そのまま</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<pre class="code">task some {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>ant.java(classname:'com.kissaki.MDTestRunner', failOnError: 'true') {</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val1")</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val2")</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: "val3")</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>classpath {</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pathElement(location: 'src')</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</pre>
<pre class="code"><span class="Apple-tab-span">	</span>}<span class="Apple-tab-span">	</span></pre>
<pre class="code">}</pre>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>とか書ける。</p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
</body>
</html>
