<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><link rel="stylesheet" type="text/less" href="../stylesheets/less/default.less"/><script type="text/javascript" src="../javascripts/less-1.3.0.min.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1138.32">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Hiragino Kaku Gothic ProN'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'; min-height: 18.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px Helvetica}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>GWTをGradleでビルドする　GWT build with Gradle</b></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>概要</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>gradleでのビルド設定など</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>github</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><a href="https://github.com/sassembla/GWTandGAEandGradle_SampleProject">https://github.com/sassembla/GWTandGAEandGradle_SampleProject</a></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>Screencast</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>http://www.screenr.com/YBH8</p>
<p class="p3"><b><span class="Apple-tab-span">	</span>*Gradleのスクリプトは下記のスクリプトをコピペしてるだけです！</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>試行錯誤をお見せ出来ずすいません。</b></p>
<p class="p2"><b></b><br></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>手順</b></p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202012-03-11%2018.57.10.png" alt="スクリーンショット 2012-03-11 18.57.10.png"></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>build.gradle</b></p>
<pre class="code">apply plugin:"war"</pre>
<pre class="code">apply plugin:"java"</pre>
<pre class="code">modulename = "GWTandGAEandGradle_SampleProject"</pre>
<pre class="code">version = 1.0</pre>
<p class="p5"><br></p>
<pre class="code">repositories {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>mavenCentral()</pre>
<pre class="code">}</pre>
<pre class="code">configurations {<span class="Apple-converted-space"> </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span>gwtCompile<span class="Apple-converted-space"> </span></pre>
<pre class="code">}</pre>
<pre class="code">dependencies {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>println("dependencies start")</pre>
<pre class="code"><span class="Apple-tab-span">	</span>//gwt from maven repo, or local.</pre>
<pre class="code"><span class="Apple-tab-span">	</span>compile "com.google.gwt:gwt-servlet:2.4.0"</pre>

<pre class="code"><span class="Apple-converted-space">    </span>//gwt compiler</pre>
<pre class="code"><span class="Apple-tab-span">	</span>gwtCompile ( <span class="Apple-converted-space">         </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[group: 'com.google.gwt', name: 'gwt-user', version: '2.4.0'], <span class="Apple-converted-space">         </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[group: 'com.google.gwt', name: 'gwt-dev', version: '2.4.0'] <span class="Apple-converted-space">         </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span>)</pre>
<pre class="code"><span class="Apple-tab-span">	</span>println("dependencies over")</pre>
<pre class="code">}</pre>
<p class="p5"><br></p>
<pre class="code"><span class="s1">//</span>出力先を<span class="s1">war</span>ファイルに</pre>
<pre class="code">gwtBuildDir = 'war'</pre>
<p class="p5"><br></pre>
<pre class="code">task gwtCompile &lt;&lt; {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>created = (new File(gwtBuildDir)).mkdirs()</pre>
<pre class="code"><span class="Apple-tab-span">	</span>println "gwtBuildDir<span class="Apple-tab-span">	</span>"+gwtBuildDir</pre>
<pre class="code"><span class="Apple-tab-span">	</span>ant.java(classname:'com.google.gwt.dev.Compiler', failOnError: 'true', fork: 'true')<span class="Apple-converted-space"> </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span>{ <span class="Apple-converted-space">   </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>//args settings</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>jvmarg(value: '-Xmx512M') <span class="Apple-converted-space">   </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(line: '-war ' + gwtBuildDir)</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(line: '-logLevel INFO') <span class="Apple-converted-space">   </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(line: '-style PRETTY')</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>println "start,,," + gwtBuildDir</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>println "configurations.compile.asPath<span class="Apple-tab-span">	</span>"+configurations.compile.asPath</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arg(value: 'com.kissaki.'+modulename)</pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>classpath { <span class="Apple-converted-space">     </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pathElement(location: 'src') <span class="Apple-converted-space">     </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pathElement(path: configurations.compile.asPath) <span class="Apple-converted-space">     </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pathElement(path: configurations.gwtCompile.asPath) <span class="Apple-converted-space">   </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>} <span class="Apple-converted-space"> </span></pre>
<pre class="code"><span class="Apple-tab-span">	</span>}</pre>
<pre class="code">}</pre>
<p class="p5"><br></pre>
<pre class="code">//dependency add.</pre>
<pre class="code">war.dependsOn gwtCompile</pre>
<pre class="code">war {</pre>
<pre class="code"><span class="Apple-tab-span">	</span>println("war start")</pre>
<pre class="code"><span class="Apple-converted-space">    </span>archiveName = "${modulename}.${extension}"</pre>
<pre class="code"><span class="Apple-converted-space">    </span>from gwtBuildDir<span class="Apple-converted-space"> </span></pre>
<pre class="code"><span class="Apple-converted-space">    </span>manifest {</pre>
<pre class="code"><span class="Apple-converted-space">       <span class="Apple-tab-span">	</span></span>attributes 'Implementation-Title': modulename+' Version'</pre>
<pre class="code"><span class="Apple-converted-space">        </span>attributes 'Implementation-Version': version</pre>
<pre class="code"><span class="Apple-converted-space">        </span>attributes provider: 'gradle'</pre>
<pre class="code"><span class="Apple-converted-space">    </span>}</pre>
<pre class="code"><span class="Apple-tab-span">	</span>println("war over")</pre>
<pre class="code">}</pre>
</body>
</html>
