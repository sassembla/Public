<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="rtfd2html handling Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1138.23">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'; min-height: 18.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Arial; color: #101010}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Arial; color: #101010; min-height: 16.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica,Arial}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica,Arial; min-height: 14.0px}
    span.s1 {font: 12.0px 'Hiragino Kaku Gothic ProN'; color: #000000}
    span.s2 {font: 14.0px 'Hiragino Kaku Gothic ProN'}
    span.s3 {font: 12.0px Helvetica,Arial}
  </style>
</head>
<body>
<p class="p1">殴り書き、iOSでのFWの作り方</p>
<p class="p2"><br></p>
<p class="p1">概要</p>
<p class="p1">iOSで動かすFWを自作する</p>
<p class="p1">実際に作成されるのはFWではなく、静的リンクライブラリ。</p>
<p class="p1">リソースも含めるので、とりあえず使うぶんには事足りる。</p>
<p class="p2"><br></p>
<p class="p1">手法</p>
<p class="p1">既存のプロジェクトにターゲットを足す、という方法でフレームワークが作れる。</p>
<p class="p1">ただし、今回は適当に空っぽのプロジェクトから作っているので、ビルドのアーキテクチャが信頼ならない感じになるようだ。</p>
<p class="p1">各々、自分の「FWにしたいプロジェクト」に対して、ターゲットを足すところからやるとよろしいんでは。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">参考（というかそのまま元）</p>
<p class="p1">http://www.cocoanetics.com/2010/05/making-your-own-iphone-frameworks-in-xcode/</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">このあと：清書します。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">手順</p>
<p class="p3"><span class="s1">新規作成 &gt; </span>Cocoa Touch Static Library</p>
<p class="p4"><br></p>
<p class="p3"><span class="s2">新規ターゲット作成</span> &gt; Loadable Bundle</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.32.08%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.32.08）.png"></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.37.12%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.37.12）.png"></p>
<p class="p6"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.38.26%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.38.26）.png"></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.38.49%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.38.49）.png"></p>
<p class="p6"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.42.31%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.42.31）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.39.48%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.39.48）.png"></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.15.47%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.15.47）.png"></p>
<p class="p1">次に、プロパティ<span class="s3"> &gt; </span>タイプを"<span class="s3">FMWK"</span>に。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.43.24%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.43.24）.png"></p>
<p class="p1">ここまでで、設定は完了。</p>
<p class="p1">ここでは、実験の為に適当に新規ファイルを作って見る。HelloWorld的な。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.46.01%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.46.01）.png"></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.48.07%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.48.07）.png"></p>
<p class="p6"><br></p>
<p class="p1">で、ターゲットに対して、ビルド時にヘッダーをコピーするステップを追加する。</p>
<p class="p1">ターゲットを右クリック &gt;<span class="Apple-converted-space"> </span></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.39.40%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.39.40）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.39.55%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.39.55）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.40.00%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.40.00）.png"></p>
<p class="p1">で、ビルドフェーズに対して手を加える時、各フェーズに対してコメントを入れられるので、この時も勝手にウインドウが開いた筈。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.49.13%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.49.13）.png"></p>
<p class="p6"><br></p>
<p class="p1">新しく出来た"ヘッダをコピー"というフェーズ(のアイコン？フォルダ？)に、先ほど作ったTestObject.hを入れう。入れうー。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.59.18%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.59.18）.png"></p>
<p class="p1">ここが今回の血圧上がるポイント。入れたヘッダーに対して、右クリックで、</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.49.53%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.49.53）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2010.49.58%EF%BC%89.png" alt="スクリーンショット（2011-05-24 10.49.58）.png"></p>
<p class="p1">と設定すると、この.hファイルが、フレームワークの外部から見えるレベルを設定出来る。</p>
<p class="p1">ステキ。ステキすぎます。前はフォルダで別けるとか残念な感じで、ソレ用にいろいろ書いてたというのに。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">で、ビルドする。ビルドターゲットを"TestTarget"に変えるのを忘れないように。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.15.59%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.15.59）.png"></p>
<p class="p1">出来た。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">後はこいつを使ってみよう。</p>
<p class="p1">何処かのプロジェクトに対して、マジでDrag&amp;Drop。落とす先は、Frameworkフォルダで。</p>
<p class="p2"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.17.05%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.17.05）.png"></p>
<p class="p1">入りました。</p>
<p class="p1">コード書く。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.49.18%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.49.18）.png"></p>
<p class="p1">起動</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-24%2011.18.04%EF%BC%89.png" alt="スクリーンショット（2011-05-24 11.18.04）.png"></p>
<p class="p1">ヤハーイ。</p>
<p class="p2"><br></p>
<p class="p1">で、こいつだと、FWをビルドした時の設定の物しか出来てない。それだと切ないのだよ。</p>
<p class="p1">あと、リソース(xib,画像etc)も入ってない。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">リソースを足す</p>
<p class="p1">例として、適当にViewControllerを足し、ボタンを足し、xibで整形する。</p>
<p class="p1">コードを此処に書くのは面倒なので割愛。</p>
<p class="p2"><br></p>
<p class="p1">フレームワークのビルドをする際巻き込まれるように、</p>
<p class="p1">TestTarget &gt; バンドルリソースをコピー の中に、画像やxibを放り込む。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.46.00%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.46.00）.png"></p>
<p class="p1">これでビルドすると、先ほどのリソースを含んだフレームワークが出来上がる。</p>
<p class="p2"><br></p>
<p class="p1">サンプルで作ったプロジェクト　A　にぶち込んだフレームワークを削除して、再度放りこむ。</p>
<p class="p1">そしたら、.frameworkフォルダから、リソースを読み込む。(ここはまだ自動化できてない。)</p>
<p class="p2"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.29.36%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.29.36）.png"></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.29.45%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.29.45）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.29.48%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.29.48）.png"></p>
<p class="p2"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.30.41%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.30.41）.png"></p>
<p class="p1">TestTarget.frameworkの中に入ってるリソースを選ぶ。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.30.55%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.30.55）.png"></p>
<p class="p1">今回はこれら。</p>
<p class="p1">(フレームワーク側でグループとかからフォルダにしておいても、完成後にこんな風にバラけてしまう間違いそうだ。どうしようorz)</p>
<p class="p2"><br></p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.31.03%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.31.03）.png"></p>
<p class="p1">コピーしない。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.31.16%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.31.16）.png"></p>
<p class="p1">で、読み出す側にもコードを追加で書く。</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.48.13%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.48.13）.png"></p>
<p class="p2"><br></p>
<p class="p1">起動</p>
<p class="p5"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.40.17%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.40.17）.png"><img src="img/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%EF%BC%882011-05-25%2015.40.19%EF%BC%89.png" alt="スクリーンショット（2011-05-25 15.40.19）.png"></p>
<p class="p2"><br></p>
<p class="p1">パーフェクト。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">最後に、マルチビルド</p>
<p class="p2"><br></p>
<p class="p1">今度頑張る。具体的には今夜11/05/25 16:03:14</p>
<p class="p1">lipoコマンドとかをビルドフェーズに記述して、、とか。</p>
</body>
</html>
