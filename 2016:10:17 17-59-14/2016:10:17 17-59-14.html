<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><link rel="stylesheet" type="text/less" href="../stylesheets/less/default.less"/><script type="text/javascript" src="../javascripts/less-1.3.0.min.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1404.47">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Hiragino Sans'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Sans'; min-height: 18.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Sans'}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px Helvetica}
    span.s2 {font: 12.0px 'Hiragino Sans'}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>wasm使って遊ぶ</b></p>
<p class="p2"><br></p>
<p class="p3"><b>概要</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>UnityでWebAssemblyを使って遊ぶ</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>wasmって何</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><a href="https://blogs.unity3d.com/jp/2015/06/18/webgl-webassembly-and-feature-roadmap/">https://blogs.unity3d.com/jp/2015/06/18/webgl-webassembly-and-feature-roadmap/</a></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><a href="https://github.com/WebAssembly/design/blob/master/FAQ.md">https://github.com/WebAssembly/design/blob/master/FAQ.md</a></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>JSを置き換えるもの? -&gt; No。</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>、、、って言ってるけど、</p>
<p class="p3"><span class="Apple-tab-span">	</span>まあ、JavaScriptのライブラリとかを作り上げるためのバイナリ、みたいな感じ。</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p3"><b>何ができるようになるの？</b></p>
<p class="p2"><b></b><br></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>実行面</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>・高速な読み込み</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>DLが終わってからのブラウザの読み込みが高速。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>jsの倍くらい。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>実行速度は一緒。</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>・軽量</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>jsそれ自体よりもサイズが小さくなる。3/4 ~ 1/2程度。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>つまりjsより高速にDLされる。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>制作面</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>・ライブラリ配布に適している</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>いままでのjsが手に入れられなかった「JSでは無い、jsで使えるオフィシャルな資産」</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>・コンパイルできるようになる</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>コンパイラを通すので、jsでありながら、事前にコンパイルができるようになる。</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>これはwasmの機能っていうよりは、開発環境の話。</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>まとめると、</p>
<p class="p3"><span class="Apple-tab-span">	</span>jsの3/4程度のサイズ -&gt; DLが1.2倍くらい高速</p>
<p class="p3"><span class="Apple-tab-span">	</span>jsより倍くらい早い読み込み -&gt; 2倍くらい高速なロード時間</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>実践WebAssembly with Unity5.5(beta7)</b></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>コンパイル</b></p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.29.16.png" alt="スクリーンショット 2016-10-17 18.29.16.png"></p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.31.18.png" alt="スクリーンショット 2016-10-17 18.31.18.png"></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>一番下のWebAssembly のチェックを付けるだけ。</p>
<p class="p3"><span class="Apple-tab-span">	</span>付けるだけで、</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>Unityで作ったコンテンツがブラウザで動くようになる。</b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>簡単なjsとの比較</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>jsでのUnityのコンテンツ:</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>2,705,128 byte = 2.7MB。</p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.38.53.png" alt="スクリーンショット 2016-10-17 18.38.53.png"></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>wasmでのUnityのコンテンツ:</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1,777,359 byte = 1.8MB。</p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.37.55.png" alt="スクリーンショット 2016-10-17 18.37.55.png"></p>
<p class="p3"><span class="Apple-tab-span">	</span>、、、軽い！！！(確信</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>比較すると、wasmはjsと比べて、65%ほどのサイズになった。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>この拡張子(wasmgz)ってなんなの？</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>gzip圧縮ってのやっててね、ブラウザにDLされると展開されるんだよ。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>動かしてみたい、、、動かしてみたくない、、？</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>こんな感じにサイズが減るぞWebAsm!!</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>サイズが小さくなってDLが速くなって、読み込みも高速なそんなWebAsm！！</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>で！？</p>
<p class="p2"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>実際のブラウザで使えんの？？</b></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span></span>そんなときはこのサイト！　</p>
<p class="p2"><br></p>
<p class="p4"><span class="s2"><b><span class="Apple-tab-span">	</span></b></span><b>Can I Use..</b></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><a href="http://caniuse.com/#search=was">http://caniuse.com/#search=was</a></p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.50.10.png" alt="スクリーンショット 2016-10-17 18.50.10.png"></p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>旗がついてるブラウザで使える。</p>
<p class="p3"><span class="Apple-tab-span">	</span>旗がついてるブラウザで<b>メニアックな設定を変えると使える</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>Safari、iOS Safari、Android Browser ともに<b>全滅。</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>Firefox、Chrome、Chrome for Androidでは<b>条件付きで動く！</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>IE、Edgeでは、まだ。</p>
<p class="p3"><span class="Apple-tab-span">	</span>ほか、、、のはまああってもなくても変わらんでしょ。(Operaは買収されて鬼籍に入ったんで考えない</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ちなみに、</p>
<p class="p4"><span class="Apple-tab-span">	</span><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2018.58.35.png" alt="スクリーンショット 2016-10-17 18.58.35.png"></p>
<p class="p5"><br></p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span></span>全ブラウザ、正式対応はまだだけど、<span class="s1"><b>In Development (</b></span><b>開発中</b><span class="s1"><b>) </b></span>なんだね。</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p3"><b>UnityでのWebコンテンツについて</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>ちょっと毛色を変えて、UnityでWebコンテンツを作ることができるのか？</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>-&gt; できる。</p>
<p class="p3"><span class="Apple-tab-span">	</span>-&gt; できるのだ。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>この記事を書いている人はこんなライブラリを作っています</p>
<p class="p2"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>Unidon</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><a href="https://github.com/sassembla/Unidon">https://github.com/sassembla/Unidon</a></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>こいつは、Unityのコンテンツをhtmlページっぽい概念で切り分けて、分割してロードして実行可能にする、っていうやつ。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>Unity + WebAsmでビルドしたコンテンツをブラウザで実行してみる</b></p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span>WebAsm</span>に対応してないブラウザの場合：</p>
<p class="p5"><br></p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span>Mac</span>の<span class="s1">Safari</span>上で動かすとこんな感じにフォールバックが発生して、asm.jsのバージョンのほうが使用される。</p>
<p class="p4"><span class="Apple-tab-span">	</span><img src="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202016-10-17%2019.20.14.png" alt="スクリーンショット 2016-10-17 19.20.14.png"></p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>WebAsmに対応してるブラウザの場合：</p>
<p class="p3"><span class="Apple-tab-span">	</span>ローディングが開始されて表示されるまでが「きもち」短い。</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">仕上げていくよという感じ。</p>
</body>
</html>
